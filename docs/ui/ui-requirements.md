# UI Requirements — Cosmic Collector (Console + Avalonia)

Цель: реализовать интерфейс приложения по макетам из ТЗ.
Master-ветка должна оставаться UI-free. UI реализуется в отдельных ветках (ui-console, ui-avalonia).

## 1. Экраны и переходы

### 1.1 Экраны
- Главное меню
- Рекорды (просмотр таблицы рекордов)
- Правила (текст правил + управление)
- Игровой экран (геймплей)
- Диалог конца игры (если поставлен рекорд — ввод имени + сохранить; также "заново"/"в меню")

### 1.2 Переходы (state machine)
- Главное меню -> Играть -> Игровой экран
- Главное меню -> Рекорды -> Главное меню
- Главное меню -> Правила -> Главное меню
- Главное меню -> Выход -> завершение приложения
- Игровой экран -> (GameOver/LevelCompleted) -> Диалог конца игры
- Диалог конца игры -> "Заново" -> Игровой экран (уровень сначала)
- Диалог конца игры -> "В главное меню" -> Главное меню

Дополнительно:
- В режиме паузы отображается overlay "Пауза" и меню "Продолжить / Выйти в главное меню".
- UI не хранит игровое состояние: читает только Snapshot, действия передаёт командами.

## 2. Управление (Console)

### 2.1 Главное меню (консоль)
- Навигация по пунктам: стрелки Вверх/Вниз
- Подтверждение: Enter
- Пункты: "Играть", "Рекорды", "Правила", "Выход"

### 2.2 Экран "Рекорды" (консоль)
- Возврат в меню: Esc или "Назад" (Enter на выбранной кнопке)
- Прокрутка списка: Up/Down, PageUp/PageDown (или постранично)
- Отображать таблицу: Место | Имя | Уровень | Очки

### 2.3 Экран "Правила" (консоль)
- Возврат: Esc или "Назад"
- Прокрутка текста: Up/Down, PageUp/PageDown
- В идеале 2 секции:
  - "Описание игры и правила"
  - "Клавиши управления"
  (в консоли можно сделать как 2 вкладки: Tab переключает секцию)

### 2.4 Игровой экран (консоль)
- Движение дрона: Left/Right (или A/D)
- Пауза: P (или Space) — показать overlay "Пауза" + пункты "Продолжить / Выйти в главное меню"
- Рендер по GameTick (TPS=60), без таймеров.

## 3. Визуальные требования по макетам (что обязательно показывать)

### 3.1 Главное меню
Элементы:
1) Название игры "Космический сборщик"
2) Версия игры
3) Список пунктов меню ("Играть", "Рекорды", "Правила", "Выход")
4) Фон/атмосфера (в консоли — допустим ASCII/заливка/рамки)

### 3.2 Рекорды
Элементы:
1) Заголовок "Рекорды"
2) Таблица рекордов (колонки: Место, Имя, Уровень, Очки)
3) Прокрутка/список
4) Кнопка "Главное меню"/"Назад"

### 3.3 Правила
Элементы:
1) Заголовок "Правила"
2) Текст с описанием правил и управления
3) Прокрутка текста
4) Кнопка "Главное меню"/"Назад"

### 3.4 Игровой процесс
Должно быть видно:
1) Игровое поле (где падают объекты)
2) Дрон игрока
3) Кристаллы (разные типы)
4) Опасности (астероиды, чёрные дыры)
5) Бонусы (ускоритель, стабилизатор времени, магнит)
6) Верхняя инфо-панель (обязательно):
   - Таймер обратного отсчёта
   - Цели уровня (что надо собрать/набрать)
   - Текущие очки
   - Текущая энергия
   - Номер уровня
Плюс: отображение активных бонусов (хотя бы текстом/иконками/таймерами).

### 3.5 Диалог конца игры / рекорд
Если игра завершилась и это рекорд — показать:
1) Заголовок "Рекорды"
2) Итоги: очки, энергия, собранные кристаллы, достигнутый уровень
3) Поле ввода имени игрока
4) Кнопка "Сохранить"
5) Кнопка "Заново" (повторить уровень)
6) Кнопка "В главное меню"

## 4. Техническая интеграция с текущей архитектурой

### 4.1 Обновление UI
- UI подписывается на события (EventBus) и/или читает GameSnapshot по GameTick.
- UI не читает внутренности модели, не пишет напрямую в GameState.

### 4.2 Команды
- UI отправляет команды (MoveLeft/MoveRight/TogglePause и др.) в CommandQueue/IGameCommand.

### 4.3 Потоки
- Game loop работает в отдельном потоке.
- UI поток НЕ лезет в model — только snapshot/события.

## 5. Definition of Done (ui-console)
- `dotnet build` и `dotnet test` проходят.
- `dotnet run --project <ConsoleUI>` запускает приложение:
  - работает главное меню (стрелки + enter)
  - открываются "Рекорды" и "Правила" и возвращаются назад
  - "Играть" запускает игровой экран
  - пауза показывает overlay
  - конец игры показывает диалог с рекордом и кнопками
