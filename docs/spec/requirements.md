# Требования к проекту «Космический сборщик»

## 1) Обязательные ограничения задания
- Две реализации интерфейса: **консольная** и **оконная (Avalonia UI)**.
- Общая логика (модели/контроллеры/сервисы/события MVC) вынесена в отдельные библиотеки.
- В общих библиотеках **нет** кода, завязанного на конкретный UI (консоль/оконный).
- Взаимодействие между компонентами — через **собственные события** (event bus / доменные события).
- Обязательно использовать MVC.
- Дополнительно применить минимум **2 шаблона проектирования** (кроме MVC).
- В UI формах/окнах/контролах не должно быть логики игры (только отображение + ввод).
- Обязательна многопоточность и синхронизация.
- Таймеры запрещены.
- Для одного класса реализовать ≥ 20 unit-тестов.

> Примечание: в исходных документах есть упоминание WPF как «оконной» реализации,
> но в проекте используем Avalonia (см. `docs/architecture/solution_structure.md`).

## 2) Игровая концепция
Игрок управляет дроном в нижней части поля и собирает падающие сверху объекты.
Есть 100 уровней; сложность растёт (скорость и частота опасных объектов увеличиваются).

### Основные объекты
- Дрон игрока: скорость, энергия, состояние (норма/дезориентация/уничтожен).
- Кристаллы (3 типа) с разным диапазоном очков.
- Астероиды (урон энергии).
- Чёрная дыра (радиус притяжения, дезориентация, втягивание объектов).
- Бонусы: ускоритель, стабилизатор времени, магнитное поле.
- Таблица рекордов (records.json).

Подробности параметров — в `docs/spec/gameplay.md`.

## 3) Динамика и формулы
- Фиксированный шаг: dt = 1/60 сек (TPS=60).
- Рост скоростей с уровнем:
  v = v_base * (1 + 0.015 * (level - 1)).
- Коллизии: AABB + «мягкая граница» 8 px.

## 4) Пауза
- Клавиши P или Esc переключают паузу.
- При снятии паузы — обратный отсчёт 3…1 с задержкой 1 сек на шаг.
- На паузе: физика/таймер/спавн стоят, но ввод и отрисовка интерфейса продолжаются.

## 5) Хранение рекордов
- Локальный файл `records.json` (UTF-8, JSON).
- Формат описан в `docs/spec/records_format.md`.
