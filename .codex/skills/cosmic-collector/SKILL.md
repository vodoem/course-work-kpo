---
name: cosmic-collector-guidelines
description: Требования и архитектурные ограничения игры «Космический сборщик» (MVC, 2 UI, многопоточность, без таймеров, тесты).
metadata:
  short-description: Проектные правила и критерии готовности
---

# Цель навыка
Помогать агенту Codex стабильно вносить изменения в проект игры «Космический сборщик», соблюдая:
- функциональные требования игры,
- ограничения задания,
- архитектуру MVC + разделение на общие библиотеки и 2 UI,
- обязательную многопоточность и синхронизацию,
- запрет на таймеры,
- стиль C# из соглашения,
- тестируемость и наличие ≥20 unit-тестов для выбранного класса.

# Как работать в этом репозитории
1) Всегда сначала прочитай:
- `docs/spec/requirements.md`
- `docs/spec/acceptance_checklist.md`
- `docs/architecture/solution_structure.md`
- `docs/architecture/threading.md`
- `docs/architecture/events.md`
- `docs/spec/csharp_style_summary.md`

2) Любая задача должна иметь:
- краткую **цель**,
- список затрагиваемых файлов,
- **критерии готовности** (что считается Done),
- команду(ы) для проверки (`dotnet build`, `dotnet test`, запуск приложений).

3) Архитектурные запреты (не нарушать):
- НЕ размещать UI-специфичный код в общих проектах.
- В UI-проектах не допускать «логики игры» в code-behind окна/контрола.
- НЕ использовать таймеры (`DispatcherTimer`, `System.Timers.Timer`, `System.Threading.Timer` и аналоги).
- Обеспечить многопоточность + синхронизацию (см. `docs/architecture/threading.md`).

4) Всегда предпочитай маленькие PR/диффы:
- один логический шаг за раз,
- легко ревьюится,
- легко откатывается.

# Определение Done для любой реализации
- Сборка проходит: `dotnet build`.
- Тесты проходят: `dotnet test`.
- Требования из `docs/spec/acceptance_checklist.md` не нарушены.
- В коде соблюдён стиль (комментарии, нейминг, 1 тип в файл и т.д.).
